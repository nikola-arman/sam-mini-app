<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>EternalAI Studio</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --bg: var(--tg-theme-bg-color, #1a1a2e);
      --bg2: var(--tg-theme-secondary-bg-color, #16213e);
      --text: var(--tg-theme-text-color, #fff);
      --hint: var(--tg-theme-hint-color, #888);
      --accent: var(--tg-theme-button-color, #7c3aed);
      --accent-text: var(--tg-theme-button-text-color, #fff);
      --link: var(--tg-theme-link-color, #7c3aed);
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 12px;
      transition: background 0.3s, color 0.3s;
    }
    
    .container { max-width: 400px; margin: 0 auto; }
    
    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    
    .fade-in { animation: fadeIn 0.3s ease-out; }
    
    /* Upload Area */
    .upload-area {
      border: 2px dashed var(--hint);
      border-radius: 16px;
      padding: 32px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
    }
    .upload-area:hover, .upload-area:active { 
      border-color: var(--accent);
      transform: scale(0.98);
    }
    .upload-area.has-image { 
      padding: 0; 
      border: none;
      aspect-ratio: 1;
    }
    .upload-area img { 
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px;
    }
    .upload-area .change-hint {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
    }
    .upload-area .icon { font-size: 48px; margin-bottom: 8px; }
    .upload-area .hint { color: var(--hint); font-size: 14px; }
    
    input[type="file"] { display: none; }
    
    /* Sample Images */
    .samples {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding: 4px 0;
      -webkit-overflow-scrolling: touch;
    }
    .samples::-webkit-scrollbar { display: none; }
    .sample-img {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      object-fit: cover;
      cursor: pointer;
      flex-shrink: 0;
      border: 2px solid transparent;
      transition: all 0.2s;
    }
    .sample-img:hover, .sample-img.active {
      border-color: var(--accent);
      transform: scale(1.05);
    }
    .samples-label {
      font-size: 12px;
      color: var(--hint);
      margin-bottom: 8px;
    }
    
    /* Type Toggle */
    .type-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .type-btn {
      flex: 1;
      padding: 12px;
      border: 1px solid var(--hint);
      border-radius: 12px;
      background: var(--bg2);
      color: var(--text);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .type-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--accent-text);
    }
    
    /* Presets */
    .presets {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 16px;
    }
    .preset-btn {
      padding: 12px 8px;
      border: 1px solid color-mix(in srgb, var(--hint) 50%, transparent);
      border-radius: 12px;
      background: var(--bg2);
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .preset-btn:hover { transform: scale(0.98); }
    .preset-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--accent-text);
    }
    .preset-btn.loading {
      pointer-events: none;
    }
    .preset-btn .emoji { font-size: 20px; display: block; margin-bottom: 4px; }
    
    /* Progress Bar */
    .progress-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: var(--accent-text);
      transition: width 0.3s ease-out;
      border-radius: 0 0 12px 12px;
    }
    
    /* Result Area */
    .result-area {
      margin-top: 20px;
    }
    
    /* Job Card */
    .job-card {
      background: var(--bg2);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      animation: fadeIn 0.3s ease-out;
    }
    .job-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .job-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--hint);
    }
    .job-close {
      background: none;
      border: none;
      color: var(--hint);
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
    }
    
    /* Loading State */
    .loading-state {
      padding: 20px;
      text-align: center;
    }
    .progress-container {
      background: color-mix(in srgb, var(--hint) 30%, transparent);
      border-radius: 10px;
      height: 8px;
      overflow: hidden;
      margin-bottom: 12px;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--link));
      border-radius: 10px;
      transition: width 0.5s ease-out;
    }
    .progress-text {
      font-size: 14px;
      color: var(--hint);
    }
    
    /* Before/After Comparison */
    .comparison {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      touch-action: none;
      user-select: none;
    }
    .comparison img {
      width: 100%;
      display: block;
    }
    .comparison .before {
      position: absolute;
      top: 0;
      left: 0;
      width: 50%;
      height: 100%;
      overflow: hidden;
    }
    .comparison .before img {
      width: 200%;
      max-width: none;
    }
    .comparison .slider {
      position: absolute;
      top: 0;
      left: 50%;
      width: 4px;
      height: 100%;
      background: #fff;
      cursor: ew-resize;
      transform: translateX(-50%);
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    .comparison .slider::before {
      content: '‚óÄ ‚ñ∂';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      color: #333;
      padding: 8px 4px;
      border-radius: 20px;
      font-size: 10px;
      white-space: nowrap;
    }
    .comparison .label {
      position: absolute;
      bottom: 8px;
      padding: 4px 8px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 11px;
      border-radius: 4px;
    }
    .comparison .label.before-label { left: 8px; }
    .comparison .label.after-label { right: 8px; }
    
    /* Result Actions */
    .result-actions {
      display: flex;
      gap: 12px;
      margin-top: 12px;
    }
    .result-btn {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 12px;
      background: var(--accent);
      color: var(--accent-text);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.2s;
    }
    .result-btn:active { transform: scale(0.95); opacity: 0.9; }
    .result-btn.secondary {
      background: var(--bg);
      color: var(--text);
      border: 1px solid var(--hint);
    }
    
    /* History */
    .history-section {
      margin-top: 24px;
      padding-top: 16px;
      border-top: 1px solid color-mix(in srgb, var(--hint) 30%, transparent);
    }
    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .history-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--hint);
    }
    .history-clear {
      font-size: 12px;
      color: var(--link);
      background: none;
      border: none;
      cursor: pointer;
    }
    .history-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
    .history-item {
      aspect-ratio: 1;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      position: relative;
      transition: transform 0.2s;
    }
    .history-item:active { transform: scale(0.95); }
    .history-item img, .history-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .history-item .video-badge {
      position: absolute;
      top: 4px;
      right: 4px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
    }
    
    .error { color: #ef4444; text-align: center; padding: 12px; }
    
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--hint);
    }
    .empty-state .icon { font-size: 48px; margin-bottom: 12px; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Upload Area -->
    <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
      <div class="icon">üì∑</div>
      <div>Tap to upload image</div>
      <div class="hint">or try a sample below</div>
    </div>
    <input type="file" id="fileInput" accept="image/*">
    
    <!-- Sample Images -->
    <div class="samples-label">‚ú® Try with these</div>
    <div class="samples" id="samples"></div>
    
    <!-- Type Toggle -->
    <div class="type-toggle">
      <button class="type-btn active" data-type="image" onclick="setType('image')">üñºÔ∏è Image</button>
      <button class="type-btn" data-type="video" onclick="setType('video')">üé¨ Video</button>
    </div>
    
    <!-- Presets -->
    <div class="presets" id="presets"></div>
    
    <!-- Results -->
    <div class="result-area" id="resultArea"></div>
    
    <!-- History -->
    <div class="history-section" id="historySection" style="display: none;">
      <div class="history-header">
        <span class="history-title">üìÇ Recent</span>
        <button class="history-clear" onclick="clearHistory()">Clear</button>
      </div>
      <div class="history-grid" id="historyGrid"></div>
    </div>
  </div>

  <script>
    const API_KEY = 'sa_e5593aa4321e8f12408468cf035ddb7d4bf704a02f16cad0da651bffb341a419';
    const API_URL = 'https://open.eternalai.org';
    
    // Sample images for first-time users
    const SAMPLE_IMAGES = [
      'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400',
      'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400',
      'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400',
      'https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=400',
    ];
    
    const IMAGE_PRESETS = [
      { emoji: "üî•", label: "Undress", prompt: "Make nude completely. Keep everything else unchanged" },
      { emoji: "üëô", label: "Bikini", prompt: "Change clothes to a bikini. Keep everything else unchanged." },
      { emoji: "ü©±", label: "Lingerie", prompt: "Change clothes to a lace lingerie. Keep everything else unchanged." },
      { emoji: "üê∞", label: "Bunny", prompt: "Reimagine as bunny girl cosplay, fitted bodysuit and accessories" },
      { emoji: "üõÅ", label: "Towel", prompt: "Replace clothes with small bath towel, wet skin, steamy" },
      { emoji: "üê±", label: "Catwoman", prompt: "Replace with Catwoman-inspired latex outfit" },
    ];
    
    const VIDEO_PRESETS = [
      { emoji: "üî•", label: "Undress", prompt: "The woman quickly takes off her clothes from top to bottom, show her nude body" },
      { emoji: "üçë", label: "Twerk", prompt: "The subject turns away from the viewer and twerks causing ass to jiggle and shake" },
      { emoji: "üíã", label: "Kiss", prompt: "She blows a kiss to the camera and winks" },
      { emoji: "üôà", label: "Cleavage", prompt: "Bends forward to show her cleavage, use one hand to pull and release the collar" },
      { emoji: "üíÉ", label: "Dance", prompt: "She dances sensually, moving her hips and body to music" },
      { emoji: "üòò", label: "Wink", prompt: "She winks and smiles seductively at the camera" },
    ];
    
    let selectedImage = null;
    let originalImage = null;
    let selectedType = 'image';
    let activeJobs = new Map();
    let history = JSON.parse(localStorage.getItem('eai_history') || '[]');
    
    // Initialize Telegram WebApp
    const tg = window.Telegram?.WebApp;
    if (tg) {
      tg.ready();
      tg.expand();
      tg.enableClosingConfirmation();
    }
    
    // Render samples
    function renderSamples() {
      const container = document.getElementById('samples');
      container.innerHTML = SAMPLE_IMAGES.map((url, i) => `
        <img src="${url}" class="sample-img" onclick="selectSample(${i})" alt="Sample ${i+1}">
      `).join('');
    }
    renderSamples();
    
    // Render presets
    function renderPresets() {
      const presets = selectedType === 'video' ? VIDEO_PRESETS : IMAGE_PRESETS;
      const container = document.getElementById('presets');
      container.innerHTML = presets.map((p, i) => `
        <button class="preset-btn" data-index="${i}" onclick="selectPreset(${i})">
          <span class="emoji">${p.emoji}</span>
          ${p.label}
          <div class="progress-bar" style="width: 0%"></div>
        </button>
      `).join('');
    }
    renderPresets();
    
    // Render history
    function renderHistory() {
      const section = document.getElementById('historySection');
      const grid = document.getElementById('historyGrid');
      
      if (history.length === 0) {
        section.style.display = 'none';
        return;
      }
      
      section.style.display = 'block';
      grid.innerHTML = history.slice(0, 9).map((item, i) => `
        <div class="history-item" onclick="viewHistory(${i})">
          ${item.type === 'video' 
            ? `<video src="${item.url}" muted></video><span class="video-badge">üé¨</span>`
            : `<img src="${item.url}" alt="History">`
          }
        </div>
      `).join('');
    }
    renderHistory();
    
    function selectSample(index) {
      haptic('light');
      const url = SAMPLE_IMAGES[index];
      
      // Mark active
      document.querySelectorAll('.sample-img').forEach((img, i) => {
        img.classList.toggle('active', i === index);
      });
      
      // Load sample
      loadImageFromUrl(url);
    }
    
    async function loadImageFromUrl(url) {
      try {
        const response = await fetch(url);
        const blob = await response.blob();
        const reader = new FileReader();
        reader.onload = (e) => {
          setSelectedImage(e.target.result);
        };
        reader.readAsDataURL(blob);
      } catch (err) {
        console.error('Failed to load sample:', err);
      }
    }
    
    function setSelectedImage(dataUrl) {
      selectedImage = dataUrl;
      originalImage = dataUrl;
      const area = document.getElementById('uploadArea');
      area.innerHTML = `
        <img src="${dataUrl}" alt="Selected">
        <span class="change-hint">Tap to change</span>
      `;
      area.classList.add('has-image');
    }
    
    // File upload handler
    document.getElementById('fileInput').addEventListener('change', async (e) => {
      const file = e.target.files[0];
      if (!file) return;
      
      haptic('medium');
      const reader = new FileReader();
      reader.onload = (e) => setSelectedImage(e.target.result);
      reader.readAsDataURL(file);
    });
    
    function setType(type) {
      haptic('light');
      selectedType = type;
      document.querySelectorAll('.type-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.type === type);
      });
      renderPresets();
    }
    
    function selectPreset(index) {
      if (!selectedImage) {
        haptic('error');
        alert('Please upload an image first');
        return;
      }
      
      if (activeJobs.has(index)) return;
      
      haptic('medium');
      
      const presets = selectedType === 'video' ? VIDEO_PRESETS : IMAGE_PRESETS;
      const preset = presets[index];
      
      generatePreset(index, preset);
    }
    
    async function generatePreset(index, preset) {
      const resultArea = document.getElementById('resultArea');
      const btn = document.querySelectorAll('.preset-btn')[index];
      const progressBar = btn.querySelector('.progress-bar');
      const jobId = `job-${Date.now()}`;
      
      activeJobs.set(index, jobId);
      btn.classList.add('active', 'loading');
      
      // Create result card
      const jobCard = document.createElement('div');
      jobCard.id = jobId;
      jobCard.className = 'job-card fade-in';
      jobCard.innerHTML = `
        <div class="job-header">
          <span class="job-title">${preset.emoji} ${preset.label}</span>
          <button class="job-close" onclick="removeJob('${jobId}', ${index})">‚úï</button>
        </div>
        <div class="loading-state">
          <div class="progress-container">
            <div class="progress-fill" style="width: 5%"></div>
          </div>
          <div class="progress-text">Starting...</div>
        </div>
      `;
      resultArea.prepend(jobCard);
      
      try {
        const response = await fetch(`${API_URL}/base/generate`, {
          method: 'POST',
          headers: { 'x-api-key': API_KEY, 'Content-Type': 'application/json' },
          body: JSON.stringify({
            images: [selectedImage],
            prompt: preset.prompt,
            type: selectedType
          })
        });
        
        const data = await response.json();
        if (!data.request_id) throw new Error('Failed to start');
        
        const result = await pollResult(data.request_id, jobId, progressBar);
        
        if (result.status === 'success' && result.result_url) {
          haptic('success');
          
          // Save to history
          addToHistory({ url: result.result_url, type: selectedType, preset: preset.label });
          
          // Show comparison view
          if (selectedType === 'image') {
            jobCard.innerHTML = `
              <div class="job-header">
                <span class="job-title">${preset.emoji} ${preset.label}</span>
                <button class="job-close" onclick="removeJob('${jobId}', ${index})">‚úï</button>
              </div>
              <div class="comparison" id="compare-${jobId}">
                <img src="${result.result_url}" alt="After" class="after">
                <div class="before"><img src="${originalImage}" alt="Before"></div>
                <div class="slider"></div>
                <span class="label before-label">Before</span>
                <span class="label after-label">After</span>
              </div>
              <div class="result-actions">
                <button class="result-btn secondary" onclick="saveResult('${result.result_url}')">üíæ Save</button>
                <button class="result-btn" onclick="shareResult('${result.result_url}')">üì§ Share</button>
              </div>
            `;
            initComparison(`compare-${jobId}`);
          } else {
            jobCard.innerHTML = `
              <div class="job-header">
                <span class="job-title">${preset.emoji} ${preset.label}</span>
                <button class="job-close" onclick="removeJob('${jobId}', ${index})">‚úï</button>
              </div>
              <video src="${result.result_url}" controls autoplay loop playsinline style="width:100%;border-radius:12px;"></video>
              <div class="result-actions">
                <button class="result-btn secondary" onclick="saveResult('${result.result_url}')">üíæ Save</button>
                <button class="result-btn" onclick="shareResult('${result.result_url}')">üì§ Share</button>
              </div>
            `;
          }
        } else {
          throw new Error('Generation failed');
        }
      } catch (err) {
        haptic('error');
        jobCard.innerHTML = `
          <div class="job-header">
            <span class="job-title">${preset.emoji} ${preset.label}</span>
            <button class="job-close" onclick="removeJob('${jobId}', ${index})">‚úï</button>
          </div>
          <div class="error">‚ùå ${err.message}</div>
        `;
      } finally {
        activeJobs.delete(index);
        btn.classList.remove('active', 'loading');
        progressBar.style.width = '0%';
      }
    }
    
    function removeJob(jobId, index) {
      haptic('light');
      const card = document.getElementById(jobId);
      if (card) {
        card.style.opacity = '0';
        card.style.transform = 'translateX(100%)';
        card.style.transition = 'all 0.3s';
        setTimeout(() => card.remove(), 300);
      }
      activeJobs.delete(index);
      const btn = document.querySelectorAll('.preset-btn')[index];
      if (btn) {
        btn.classList.remove('active', 'loading');
        btn.querySelector('.progress-bar').style.width = '0%';
      }
    }
    
    async function pollResult(requestId, jobId, progressBar, maxAttempts = 90) {
      const card = document.getElementById(jobId);
      const progressFill = card?.querySelector('.progress-fill');
      const progressText = card?.querySelector('.progress-text');
      
      for (let i = 0; i < maxAttempts; i++) {
        await new Promise(r => setTimeout(r, 2000));
        
        const response = await fetch(`${API_URL}/poll-result/${requestId}`);
        const data = await response.json();
        
        if (data.status === 'success') return data;
        if (data.status === 'failed') throw new Error('Generation failed');
        
        // Update progress
        const progress = data.progress || Math.min(5 + i * 2, 95);
        if (progressFill) progressFill.style.width = `${progress}%`;
        if (progressBar) progressBar.style.width = `${progress}%`;
        if (progressText) {
          const msgs = ['Processing...', 'AI is working...', 'Almost there...', 'Finishing up...'];
          progressText.textContent = `${msgs[Math.min(Math.floor(i/5), 3)]} ${progress}%`;
        }
      }
      throw new Error('Timeout');
    }
    
    // Before/After comparison slider
    function initComparison(id) {
      const container = document.getElementById(id);
      if (!container) return;
      
      const before = container.querySelector('.before');
      const slider = container.querySelector('.slider');
      let isDragging = false;
      
      function updatePosition(x) {
        const rect = container.getBoundingClientRect();
        let pos = (x - rect.left) / rect.width;
        pos = Math.max(0.05, Math.min(0.95, pos));
        before.style.width = `${pos * 100}%`;
        slider.style.left = `${pos * 100}%`;
      }
      
      container.addEventListener('mousedown', (e) => { isDragging = true; updatePosition(e.clientX); });
      container.addEventListener('touchstart', (e) => { isDragging = true; updatePosition(e.touches[0].clientX); });
      
      document.addEventListener('mousemove', (e) => { if (isDragging) updatePosition(e.clientX); });
      document.addEventListener('touchmove', (e) => { if (isDragging) updatePosition(e.touches[0].clientX); });
      
      document.addEventListener('mouseup', () => isDragging = false);
      document.addEventListener('touchend', () => isDragging = false);
    }
    
    // History
    function addToHistory(item) {
      history.unshift({ ...item, time: Date.now() });
      history = history.slice(0, 20);
      localStorage.setItem('eai_history', JSON.stringify(history));
      renderHistory();
    }
    
    function viewHistory(index) {
      haptic('light');
      const item = history[index];
      if (!item) return;
      
      // Open in fullscreen or show modal
      if (item.type === 'video') {
        window.open(item.url, '_blank');
      } else {
        window.open(item.url, '_blank');
      }
    }
    
    function clearHistory() {
      haptic('medium');
      if (confirm('Clear all history?')) {
        history = [];
        localStorage.removeItem('eai_history');
        renderHistory();
      }
    }
    
    // Actions
    async function saveResult(url) {
      haptic('medium');
      try {
        const response = await fetch(url);
        const blob = await response.blob();
        const blobUrl = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = `eternalai-${Date.now()}.${url.includes('.mp4') ? 'mp4' : 'jpg'}`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(blobUrl);
        haptic('success');
      } catch (err) {
        window.open(url, '_blank');
      }
    }
    
    function shareResult(url) {
      haptic('medium');
      const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent('Made with EternalAI ‚ú®')}`;
      if (tg?.openTelegramLink) {
        tg.openTelegramLink(shareUrl);
      } else {
        window.open(shareUrl, '_blank');
      }
    }
    
    // Haptic feedback helper
    function haptic(type) {
      if (!tg?.HapticFeedback) return;
      switch(type) {
        case 'light': tg.HapticFeedback.impactOccurred('light'); break;
        case 'medium': tg.HapticFeedback.impactOccurred('medium'); break;
        case 'heavy': tg.HapticFeedback.impactOccurred('heavy'); break;
        case 'success': tg.HapticFeedback.notificationOccurred('success'); break;
        case 'error': tg.HapticFeedback.notificationOccurred('error'); break;
      }
    }
  </script>
</body>
</html>
